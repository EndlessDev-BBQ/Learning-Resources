# åŠ¨æ€æ’åºè¡¨æ ¼

## é¡µé¢ç»“æ„åˆ†æ

### è¡¥å……çŸ¥è¯†

```js
.table-container {
  margin: 100px auto;
  width: 500px;
  border-collapse: collapse; /* [æ³¨] */
}
```

[æ³¨]ï¼šå…³äº[border-collapse](https://developer.mozilla.org/zh-CN/docs/Web/CSS/border-collapse)

å±æ€§å€¼ï¼š

collapseåˆå¹¶: 

![border-collapse-1](https://img.hoocode.com/i/2024/12/01/10lmj5i.webp)

separateåˆ†ç¦»:

![border-collapse-2](https://img.hoocode.com/i/2024/12/01/10lmm0x.webp)

### åˆ†æé¡µé¢ç»“æ„

![é¡µé¢ç»“æ„åˆ†æ](https://img.hoocode.com/i/2024/12/01/10swpi0.webp)

å®Œæ•´ä»£ç ï¼š

HTML

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>åŠ¨æ€æ’åºè¡¨æ ¼</title>
    <link rel="stylesheet" href="./css/index.css" />
  </head>
  <body>
    <table class="table-container">
      <thead>
        <tr>
          <th>
            <input type="checkbox" id="checkAll" />
          </th>
          <th>ç¼–å·</th>
          <th>å§“å</th>
          <th>å¹´é¾„</th>
          <th>èŒä½</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="checkbox" class="checkSingle" /></td>
          <td>6</td>
          <td>è‰¾ä¼¦</td>
          <td>23</td>
          <td>ç½‘ç»œå·¥ç¨‹å¸ˆ</td>
        </tr>
        <tr>
          <td><input type="checkbox" class="checkSingle" /></td>
          <td>18</td>
          <td>ä¹ä¹</td>
          <td>38</td>
          <td>WEBå‰ç«¯</td>
        </tr>
        <tr>
          <td><input type="checkbox" class="checkSingle" /></td>
          <td>29</td>
          <td>æ—è‚¯</td>
          <td>23</td>
          <td>åç«¯ç¨‹åºå‘˜</td>
        </tr>
        <tr>
          <td><input type="checkbox" class="checkSingle" /></td>
          <td>14</td>
          <td>æ¯›æ¯›</td>
          <td>20</td>
          <td>æ¸¸æˆå¼€å‘å·¥ç¨‹å¸ˆ</td>
        </tr>
        <tr>
          <td><input type="checkbox" class="checkSingle" /></td>
          <td>11</td>
          <td>ç›ä¸½</td>
          <td>32</td>
          <td>å®¢æœ</td>
        </tr>
        <tr>
          <td><input type="checkbox" class="checkSingle" /></td>
          <td>56</td>
          <td>å‡¯ç‰¹</td>
          <td>28</td>
          <td>æŠ€æœ¯æ€»ç›‘</td>
        </tr>
      </tbody>
    </table>
    <script src="./js/index.js"></script>
  </body>
</html>
```

CSS

```css
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.table-container {
  margin: 100px auto;
  width: 500px;
  border-collapse: collapse;
  text-align: center;
}

tr {
  height: 30px;
}

tr:hover {
  background-color: #f5f7fa;
}

th,
td {
  padding: 5px;
  border: 1px solid #ccc;
  font-size: 16px;
  font-weight: 300;
}

th {
  cursor: pointer;
}

input {
  width: 18px;
  height: 18px;
  cursor: pointer;
}
```

## å®ç°æ€è·¯åˆ†æ

> æ€è€ƒï¼š
>
> 1. åˆå§‹åŒ–ï¼šä¸€å¼€å§‹åšä»€ä¹ˆï¼Ÿ
> 2. äº¤äº’ï¼šè·Ÿç”¨æˆ·æœ‰ä»€ä¹ˆäº¤äº’ï¼Ÿäº¤äº’çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ
> 3. æœ€åä¸ºäº†é˜²æ­¢å…¨å±€æ±¡æŸ“ï¼Œ åº”æŠŠä»£ç æ”¾åœ¨ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°é‡Œã€‚åˆšå¼€å§‹çš„æ—¶å€™å› ä¸ºè¦åšæµ‹è¯•ï¼Œå¯ä»¥å…ˆä¸æ”¾ã€‚

### åˆå§‹åŒ–ï¼šä¸€å¼€å§‹åšä»€ä¹ˆï¼Ÿ

å¦‚æœä¸€å¼€å§‹æ•°æ®æ˜¯ä» JS é‡Œè·å–çš„è¯ï¼Œé‚£ä¸€å¼€å§‹å°±éœ€è¦åˆå§‹åŒ–è¡¨æ ¼ä¸‹çš„ tbody ï¼ŒæŠŠ JS é‡Œçš„æ•°æ®ç²¾å‡†çš„æ”¾åˆ° tbody ä¸‹é¢ã€‚

ä½†è¿™é‡Œæ²¡æœ‰ï¼Œè¿™é‡Œåªæ˜¯é™æ€çš„è·å–é¡µé¢ä¸Šçš„æ•°æ®è€Œå·²ï¼Œæ‰€ä»¥ä¸€å¼€å§‹æˆ‘ä»¬è¦åšåˆå§‹åŒ–çš„è¯ï¼Œå¯ä»¥é€‰æ‹©æŠŠé¡µé¢ä¸Šéœ€è¦ç”¨åˆ°çš„ dom å…ƒç´ éƒ½è·å–ä¸€éã€‚ğŸ™‚

```js
// æ‰€éœ€è¦çš„ dom å…ƒç´ 
function $(selector) {
    return document.querySelector(selector);
}
function $$(selector) {
    return document.querySelectorAll(selector);
}

var doms = {
    table: $(".table-container"),
    thead: $("thead"),
    tbody: $("tbody"),
    checkAllBox: $("#checkAll"),
    checkSingleBox: $$(".checkSingle")
};
```

åˆå§‹åŒ–çš„å·¥ä½œå°±ç»“æŸäº†ã€‚

### äº¤äº’ï¼šè·Ÿç”¨æˆ·æœ‰ä»€ä¹ˆäº¤äº’ï¼Ÿäº¤äº’çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ

ä»å‰å‡ ä¸ªé¡¹ç›®å¯ä»¥çŸ¥é“ï¼Œ **äº¤äº’çš„æœ¬è´¨å…¶å®æ˜¯å„ä¸ªåŠŸèƒ½å‡½æ•°çš„å®ç°** ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ€è€ƒï¼šæˆ‘è¦å®ç°ä»€ä¹ˆåŠŸèƒ½ï¼Ÿéœ€è¦ä»€ä¹ˆæ ·çš„åŠŸèƒ½å‡½æ•°ï¼Ÿ

>  è¦å®ç°çš„åŠŸèƒ½ï¼š
>
> 1. å½“å…¨é€‰æŒ‰é’®ä¸ºé€‰ä¸­çŠ¶æ€æ—¶ï¼Œtbody é‡Œé¢çš„æŒ‰é’®ä¹Ÿä¸ºé€‰ä¸­çŠ¶æ€ã€‚
> 2. å½“ tbody é‡Œæ‰€æœ‰çš„å¤é€‰æ¡†éƒ½é€‰ä¸­çš„æ—¶å€™ï¼Œå…¨é€‰æŒ‰é’®è¦å˜æ›´ä¸ºé€‰ä¸­çŠ¶æ€ã€‚
> 3. æ’åºåŠŸèƒ½ï¼šå¦‚æœç‚¹å‡»çš„é‚£ä¸€åˆ—ä¸ºæ•°å­—ï¼Œç”¨æ•°å­—æ’åºï¼›å¦‚æœç‚¹å‡»çš„é‚£ä¸€åˆ—ä¸ºä¸­æ–‡ï¼Œç”¨ä¸­æ–‡æ’åºã€‚

ä¸€ä¸ªä¸ªæ¥åˆ†æ

#### 1. å½“å…¨é€‰æŒ‰é’®ä¸ºé€‰ä¸­çŠ¶æ€æ—¶ï¼Œtbody é‡Œé¢çš„æŒ‰é’®ä¹Ÿä¸ºé€‰ä¸­çŠ¶æ€

- å®ç°æ€è·¯ï¼ˆå¯»æ‰¾åŠŸèƒ½å‡½æ•°çš„ä»»åŠ¡ï¼‰ï¼šè·å– thead é‡Œçš„å…¨é€‰æ¡†çš„ dom å…ƒç´ ï¼Œç›‘å¬å®ƒçš„ç‚¹å‡»ï¼Œå¦‚æœç‚¹å‡»å®ƒäº†ï¼Œé‚£å°±è·å–å®ƒå½“å‰é€‰ä¸­çš„çŠ¶æ€ã€‚æ ¹æ®é€»è¾‘ï¼Œç‚¹å‡» => å…¨é€‰æ¡†ä¸º true çš„æ—¶å€™ï¼Œtbody é‡Œçš„å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ä¹Ÿéƒ½ä¸º trueï¼›ç‚¹å‡» => å…¨é€‰æ¡†ä¸º false çš„æ—¶å€™ï¼Œtbody é‡Œçš„å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ä¹Ÿéƒ½ä¸º falseã€‚æ‰€ä»¥å®é™…ä¸Šï¼Œåªè¦è®© tbody ä¸‹çš„å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ä¸å…¨é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ä¿æŒä¸€è‡´å°±å¯ä»¥äº†ã€‚

- ä»£ç è®¾è®¡æ€è·¯ï¼ˆå®ç°åŠŸèƒ½å‡½æ•°çš„ä»»åŠ¡ï¼‰ï¼š

ç›‘å¬å…¨é€‰æ¡†çš„ç‚¹å‡» => è°ƒç”¨åŠŸèƒ½å‡½æ•° => è¯¥åŠŸèƒ½å‡½æ•°å®ç°äº†ï¼š

1. è·å–å½“å‰å…¨é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€
2. è·å– tbody ä¸­çš„å¤é€‰æ¡†é›†åˆ
3. éå† tbody ä¸­çš„å¤é€‰æ¡†ï¼Œå°†æ¯ä¸ªå¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ä¸å½“å‰å…¨é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ä¿æŒä¸€è‡´

ä»¥ä¸Š 3 ç‚¹å°±æ˜¯è¯¥åŠŸèƒ½å‡½æ•°çš„ä»»åŠ¡

##### åŠŸèƒ½å‡½æ•°ï¼ˆ `contemTBodyAndTTitleCheckStatus` ï¼‰

```js
// 1-1. å‡½æ•°ï¼šå®ç°è·å–checkAllçš„é€‰ä¸­çŠ¶æ€ï¼Œå°†å®ƒä¸ tbody é‡Œçš„æ‰€æœ‰ input å…ƒç´ è¿›è¡ŒåŒæ­¥
function contemTBodyAndTTitleCheckStatus() {
    // è·å–åˆ°checkAllçš„çŠ¶æ€
    var checkAllStatus = doms.checkAllBox.checked;
    // è·å–åˆ°checkSingleBoxä¸‹çš„æ‰€æœ‰checkboxçš„çŠ¶æ€
    for (var i = 0; i < doms.checkSingleBox.length; i++) {
        // å®ƒä»¬çš„çŠ¶æ€è¦ä¸checkAllçš„çŠ¶æ€ä¿æŒä¸€è‡´
        doms.checkSingleBox[i].checked = checkAllStatus;
    }
}
```

##### ç»‘å®šç›‘å¬äº‹ä»¶

```js
/**
   * ç»‘å®šç›‘å¬äº‹ä»¶
   *  */
doms.checkAllBox.addEventListener("click", contemTBodyAndTTitleCheckStatus);
```

#### 2. å½“ tbody é‡Œæ‰€æœ‰çš„å¤é€‰æ¡†éƒ½é€‰ä¸­çš„æ—¶å€™ï¼Œå…¨é€‰æŒ‰é’®è¦å˜æ›´ä¸ºé€‰ä¸­çŠ¶æ€ã€‚

- å®ç°æ€è·¯ï¼ˆå¯»æ‰¾åŠŸèƒ½å‡½æ•°çš„ä»»åŠ¡ï¼‰ï¼šè·å– tbody é‡Œæ¯è¡Œçš„å¤é€‰æ¡†çš„ dom å…ƒç´ ï¼Œç›‘å¬å®ƒä»¬çš„ç‚¹å‡»ï¼Œå¦‚æœç‚¹å‡»å®ƒäº†ï¼Œç»Ÿè®¡ä¸€ä¸‹å½“å‰ tbody ä¸‹å¤é€‰æ¡†ä¸ºé€‰ä¸­çŠ¶æ€çš„ä¸ªæ•°ï¼ˆ `curCheckedNumsInTBody` ï¼‰ï¼Œå¦‚æœä¸ªæ•°ç­‰äº tbody é‡Œçš„å­å…ƒç´ ä¸ªæ•°ï¼Œé‚£ä¹ˆå…¨é€‰æ¡†çš„çŠ¶æ€å°±ä¸º trueï¼Œå¦åˆ™ä¸º falseï¼›å¹¶ä¸”ï¼Œè¦æ›´æ”¹ä¸‹ä¹‹å‰å…¨é€‰æ¡†äº¤äº’çš„ä»£ç ï¼Œå½“å…¨é€‰æ¡†ç‚¹å‡»çš„æ—¶å€™ï¼Œåˆ¤æ–­ä¸‹å½“å‰å…¨é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ï¼Œå¦‚æœä¸º trueï¼Œå½“å‰ tbody ä¸‹å¤é€‰æ¡†ä¸ºé€‰ä¸­çŠ¶æ€çš„ä¸ªæ•°ï¼ˆ `curCheckedNumsInTBody` ï¼‰å°±ä¸º tbody é‡Œçš„å­å…ƒç´ çš„ä¸ªæ•°ï¼›å¦‚æœä¸º falseï¼Œå½“å‰ tbody ä¸‹å¤é€‰æ¡†ä¸ºé€‰ä¸­çŠ¶æ€çš„ä¸ªæ•°ï¼ˆ `curCheckedNumsInTBody` ï¼‰å°±ä¸º 0ã€‚
- ä»£ç è®¾è®¡æ€è·¯ï¼ˆå®ç°åŠŸèƒ½å‡½æ•°çš„ä»»åŠ¡ï¼‰ï¼š

ç›‘å¬ tbody ä¸­å¤é€‰æ¡†çš„ç‚¹å‡»ï¼ˆ checkSingleBox æ•°ç»„é‡Œä¿å­˜äº†æ¯é¡¹çš„å¤é€‰æ¡† dom å…ƒç´ ï¼‰ => éå† checkSingleBox æ•°ç»„ï¼Œç»™æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹å¤é€‰æ¡† dom å…ƒç´ ç»‘å®šä¸Šç‚¹å‡»çš„ç›‘å¬äº‹ä»¶ => è°ƒç”¨åŠŸèƒ½å‡½æ•° => è¯¥åŠŸèƒ½å‡½æ•°å®ç°äº†ï¼š

1. æ¯ç‚¹å‡»ä¸€æ¬¡ï¼Œå°±éå†ä¸‹ checkSingleBox æ•°ç»„ï¼Œç»Ÿè®¡å¤é€‰æ¡†é€‰ä¸­çš„çŠ¶æ€ï¼Œä¿å­˜åœ¨  `curCheckedNumsInTBody` é‡Œé¢ã€‚
2. å¦‚æœ`curCheckedNumsInTBody`çš„æ•°å€¼ç­‰äº tbody ä¸­å­å…ƒç´ çš„ä¸ªæ•°ï¼Œé‚£å°±ä»£è¡¨å…¨éƒ¨é€‰ä¸­äº†ï¼Œæ­¤æ—¶ï¼Œè®¾ç½®å…¨é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ä¸º trueï¼›å¦‚æœæ•°å€¼ä¸ç›¸ç­‰ï¼Œåˆ™è®¾ç½®å…¨é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ä¸º falseã€‚
3. æ›´æ”¹ä¹‹å‰å…¨é€‰æ¡†äº¤äº’çš„ä»£ç ï¼šå½“å…¨é€‰æ¡†ç‚¹å‡»çš„æ—¶å€™ï¼Œåˆ¤æ–­ä¸‹å½“å‰å…¨é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ï¼Œå¦‚æœä¸º trueï¼Œå½“å‰ tbody ä¸‹å¤é€‰æ¡†ä¸ºé€‰ä¸­çŠ¶æ€çš„ä¸ªæ•°ï¼ˆ `curCheckedNumsInTBody` ï¼‰å°±ä¸º tbody é‡Œçš„å­å…ƒç´ çš„ä¸ªæ•°ï¼›å¦‚æœä¸º falseï¼Œå½“å‰ tbody ä¸‹å¤é€‰æ¡†ä¸ºé€‰ä¸­çŠ¶æ€çš„ä¸ªæ•°ï¼ˆ `curCheckedNumsInTBody` ï¼‰å°±ä¸º 0ã€‚

##### åŠŸèƒ½å‡½æ•°ï¼ˆ `changeTTitleCheckStatusAccordingTBody` ï¼‰

```js
var curCheckedNumsInTBody = 0; // è®°å½•å½“å‰ tbody é‡Œ checkbox è¢«é€‰ä¸­çš„ä¸ªæ•°

// 1-1. å‡½æ•°ï¼šå®ç°è·å–checkAllçš„é€‰ä¸­çŠ¶æ€ï¼Œå°†å®ƒä¸ tbody é‡Œçš„æ‰€æœ‰ input å…ƒç´ è¿›è¡ŒåŒæ­¥
function contemTBodyAndTTitleCheckStatus() {
    // è·å–åˆ°checkAllçš„çŠ¶æ€
    var checkAllStatus = doms.checkAllBox.checked;
    // è·å–åˆ°checkSingleBoxä¸‹çš„æ‰€æœ‰checkboxçš„çŠ¶æ€
    for (var i = 0; i < doms.checkSingleBox.length; i++) {
        //   console.log(doms.checkSingleBox[i].checked);
        // å®ƒä»¬çš„çŠ¶æ€è¦ä¸checkAllçš„çŠ¶æ€ä¿æŒä¸€è‡´
        doms.checkSingleBox[i].checked = checkAllStatus;
    }
    if (!checkAllStatus) {
        // å¦‚æœå…¨é€‰æ¡†çš„çŠ¶æ€ä¸º false çš„è¯
        curCheckedNumsInTBody = 0; // tbody é‡Œæ‰€æœ‰ checkbox é‡Œé€‰ä¸­çš„ä¸ªæ•°ä¸º 0
    } else {
        // å¦‚æœå…¨é€‰æ¡†çš„çŠ¶æ€ä¸º true çš„è¯
        curCheckedNumsInTBody = doms.tbody.children.length; // tbody é‡Œæ‰€æœ‰çš„ checkbox é‡Œé€‰ä¸­çš„ä¸ªæ•°å°±ä¸ tbody çš„é•¿åº¦ä¸€æ ·
    }
}

// 1-2. å‡½æ•°ï¼šç»Ÿè®¡tbodyå¤é€‰æ¡†çš„æŒ‰é’®é€‰ä¸­ä¸ªæ•°ï¼Œå¦‚æœtbodyé‡Œçš„é•¿åº¦ç›¸ç­‰ï¼Œé‚£å°±æ›´æ”¹å…¨é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€
function changeTTitleCheckStatusAccordingTBody() {
    //   console.log(this);
    if (this.checked) {
        // å½“ç‚¹å‡»ä¹‹åï¼ŒçŠ¶æ€æ˜¯ true çš„è¯ï¼Œå°±æŠŠé€‰ä¸­çš„ä¸ªæ•°çš„ + 1
        curCheckedNumsInTBody++;
    } else {
        // å¦åˆ™ï¼ŒæŠŠé€‰ä¸­çš„ä¸ªæ•° - 1
        curCheckedNumsInTBody--;
    }

    console.log("å½“å‰é€‰ä¸­çš„ä¸ªæ•°ï¼š" + curCheckedNumsInTBody);

    // å¦‚æœtbody é‡Œé€‰ä¸­çš„ä¸ªæ•°ä¸ tbody é‡Œçš„é¡¹æ•°å…ˆç­‰ï¼Œé‚£å°±è®¾ç½®å…¨é€‰æ¡†çš„çŠ¶æ€ä¸º true
    if (curCheckedNumsInTBody === doms.checkSingleBox.length) {
        doms.checkAllBox.checked = true;
    } else {
        doms.checkAllBox.checked = false;
    }
}
```

##### ç»‘å®šç›‘å¬äº‹ä»¶

```js
for (var i = 0; i < doms.checkSingleBox.length; i++) {
    doms.checkSingleBox[i].addEventListener("click", changeTTitleCheckStatusAccordingTBody);
}
```

#### 3. æ’åºåŠŸèƒ½ï¼šå¦‚æœç‚¹å‡»çš„é‚£ä¸€åˆ—ä¸ºæ•°å­—ï¼Œç”¨æ•°å­—æ’åºï¼›å¦‚æœç‚¹å‡»çš„é‚£ä¸€åˆ—ä¸ºä¸­æ–‡ï¼Œç”¨ä¸­æ–‡æ’åºã€‚

- å®ç°æ€è·¯ï¼ˆå¯»æ‰¾åŠŸèƒ½å‡½æ•°çš„ä»»åŠ¡ï¼‰ï¼šå…ˆè·å–åˆ°ç‚¹å‡»çš„æ˜¯å“ªä¸€é¡¹ï¼Œå¯ä»¥ç”¨ä¸ªæ•°ç»„ä¿å­˜åˆ—çš„åå­—ï¼Œç„¶åæ ¹æ®ç‚¹å‡»å…ƒç´ çš„å†…å®¹åˆ°æ•°ç»„é‡Œé¢æ‰¾åˆ°å¯¹åº”çš„ä¸‹æ ‡ã€‚æ‹¿åˆ°ä¸‹æ ‡åï¼Œéå† tbody çš„æ¯é¡¹é‡Œçš„ç›¸åº”ä¸‹æ ‡æ‰€å¯¹åº”çš„å€¼ï¼Œå¯¹å…¶è¿›è¡Œæ’åºã€‚å¹¶ä¸”éœ€è¦æ ¹æ®æ‰€ç‚¹å‡»çš„åˆ—çš„åå­—ï¼ŒåŒºåˆ†å‡ºç‚¹çš„æ˜¯æ•°å­—è¿˜æœ‰ä¸­æ–‡ã€‚

- ä»£ç è®¾è®¡æ€è·¯ï¼ˆå®ç°åŠŸèƒ½å‡½æ•°çš„ä»»åŠ¡ï¼‰ï¼š

ç›‘å¬ thead é‡Œçš„ç‚¹å‡»äº‹ä»¶ï¼ˆç”¨äº‹ä»¶å§”æ‰˜æœºåˆ¶ï¼‰=> æ’é™¤æ‰å…¨é€‰æ¡†æ‰€åœ¨çš„é‚£ä¸€åˆ—ï¼Œå‰©ä¸‹çš„å‡ åˆ—è¿›è¡Œåé¢çš„æ’åºæ“ä½œ => æ‰¾åˆ°æ‰€ç‚¹å‡»å…ƒç´ çš„å†…å®¹ï¼Œæ ¹æ®å†…å®¹åˆ°å®šä¹‰å¥½çš„åˆ—æ•°ç»„é‡Œé¢æŸ¥æ‰¾ï¼Œçœ‹æ˜¯å±äºâ€œæ•°å­—â€è¿˜æ˜¯â€œä¸­æ–‡â€çš„ => æ•°å­—ï¼Œç”¨æ•°å­—æ’åºï¼›ä¸­æ–‡ï¼Œç”¨ä¸­æ–‡æ’åºï¼ˆ `a.localeCompare( b.localeCompare, "zh" )` ï¼‰

##### åŠŸèƒ½å‡½æ•°ï¼ˆ `clickIndexInTTitle` ï¼‰=> ï¼ˆ `sortWithNums` ï¼‰&&ï¼ˆ `sortWithZH` ï¼‰

```js
// 2-1. æ ¹æ®æ‰€ç‚¹å‡»çš„é¡¹ï¼Œè¾“å‡ºå¯¹åº”çš„ä¸‹æ ‡ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œå¾…ä¼štbodyé‡Œçš„æ•°ç»„å¯ä»¥åªå–å¯¹åº”ä¸‹æ ‡çš„æ•°å€¼è¿›è¡Œæ¯”è¾ƒ
function clickIndexInTTitle(e) {
    if (e.target.tagName === "INPUT") {
        return; // ç‚¹å‡»äº† input å…ƒç´ çš„è¯ï¼Œé‚£å°±è·³è¿‡
    }
    // æ‹¿åˆ°æ‰€ç‚¹å‡»é¡¹çš„ innerTextï¼Œæ‰¾åˆ°é‡Œé¢çš„æ–‡å­—æ˜¯å±äº ttNameä¸‹æ ‡çš„å“ªä¸€ä½
    // console.log(ttName.indexOf(e.target.innerText));
    var index = ttName.indexOf(e.target.innerText);
    if (index === -1) {
        return; // æ’é™¤æ‰ç‚¹å‡»äº† input å…ƒç´ çš„ th æ ‡ç­¾
    }
    // è·å–åˆ°å¯¹åº”éœ€è¦æ’åºçš„æ•°ç»„
    if (e.target.innerText === "ç¼–å·" || e.target.innerText === "å¹´é¾„") {
        console.log("ç‚¹å‡»äº†ç¼–å·æˆ–è€…å¹´é¾„");
        sortWithNums(index);
    }

    if (e.target.innerText === "å§“å" || e.target.innerText === "èŒä½") {
        console.log("ç‚¹å‡»äº†å§“åæˆ–è€…èŒä½");
        sortWithZH(index);
    }
}
```

```js
// æ ¹æ®æ•°å­—æ’åº
function sortWithNums(index) {
    // è·å– tbody ä¸­ æ¯é¡¹ çš„ index ä¸‹æ ‡çš„å…ƒç´ 
    var arr = Array.prototype.slice.call(doms.tbody.children);
    arr.sort(function (a, b) {
        return a.children[index].innerText - b.children[index].innerText;
    });
    for (var i = 0; i < arr.length; i++) {
        doms.tbody.appendChild(arr[i]);
    }
}

// æ ¹æ®ä¸­æ–‡æ’åº
function sortWithZH(index) {
    // è·å– tbody ä¸­ æ¯é¡¹ çš„ index ä¸‹æ ‡çš„å…ƒç´ 
    var arr = Array.prototype.slice.call(doms.tbody.children);
    arr.sort(function (a, b) {
        return a.children[index].innerText.localeCompare(b.children[index].innerText, "zh");
    });
    for (var i = 0; i < arr.length; i++) {
        doms.tbody.appendChild(arr[i]);
    }
}
```

##### ç»‘å®šç›‘å¬äº‹ä»¶

```js
// åˆ©ç”¨äº‹ä»¶å§”æ‰˜æœºåˆ¶ç›‘å¬ thead çš„ç‚¹å‡»äº‹ä»¶
doms.thead.addEventListener("click", clickIndexInTTitle);
```

**æœ€ç»ˆæ•ˆæœ**

![åŠ¨æ€æ’åºè¡¨æ ¼-æœ€ç»ˆæ•ˆæœ](https://img.hoocode.com/i/2024/12/02/9rr18.gif)

### æœ€åæŠŠä»£ç æ”¾åœ¨ç«‹å³æ‰§è¡Œå‡½æ•°é‡Œ

å®Œæ•´ä»£ç ï¼š

JavaScript

```js
// å®ç°
/**
 * 1. å…¨é€‰æŒ‰é’®çš„äº‹ä»¶
 *  1-1. ç‚¹å‡»å…¨é€‰æŒ‰é’®ï¼Œä¸‹é¢ tbody çš„å¤é€‰æ¡†ä¹Ÿè·Ÿç€å˜åŠ¨
 *  1-2. ç»Ÿè®¡ä¸‹é¢å¤é€‰æ¡†çš„æŒ‰é’®é€‰ä¸­ä¸ªæ•°ï¼Œå¦‚æœä¸tbodyé‡Œçš„é•¿åº¦ç›¸ç­‰ï¼Œé‚£ä¹ˆå°±æ›´æ”¹å…¨é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€
 * 2. å…¶ä»–é¡¹çš„æ’åºäº‹ä»¶
 *  2-1. çœ‹é€‰ä¸­çš„é¡¹çš„ä¸‹æ ‡æ˜¯å¤šå°‘ï¼Œæ ¹æ®ä¸‹æ ‡å®šæ’åºçš„æ–¹å¼
 *  2-2. æ•°å­—ä¸‹æ ‡ç”¨ sortï¼Œä¸­æ–‡ä¸‹æ ‡ç”¨ localeCompare
 */
(function () {
  // æ‰€éœ€è¦çš„ dom å…ƒç´ 
  function $(selector) {
    return document.querySelector(selector);
  }
  function $$(selector) {
    return document.querySelectorAll(selector);
  }

  var doms = {
    table: $(".table-container"),
    thead: $("thead"),
    tbody: $("tbody"),
    checkAllBox: $("#checkAll"),
    checkSingleBox: $$(".checkSingle")
  };

  // éœ€è¦çš„æ•°æ®
  var curCheckedNumsInTBody = 0; // è®°å½•å½“å‰ tbody é‡Œ checkbox è¢«é€‰ä¸­çš„ä¸ªæ•°
  var ttName = ["box", "ç¼–å·", "å§“å", "å¹´é¾„", "èŒä½"]; // è®°å½•å½“å‰ thead é‡Œæœ‰å“ªäº›æ ‡ç­¾
  // console.log(ttName.indexOf("ç¼–å·"));

  //   console.log(doms.table, doms.checkAllBox, doms.checkSingleBox);

  // 1-1. å‡½æ•°ï¼šå®ç°è·å–checkAllçš„é€‰ä¸­çŠ¶æ€ï¼Œå°†å®ƒä¸ tbody é‡Œçš„æ‰€æœ‰ input å…ƒç´ è¿›è¡ŒåŒæ­¥
  function contemTBodyAndTTitleCheckStatus() {
    // è·å–åˆ°checkAllçš„çŠ¶æ€
    var checkAllStatus = doms.checkAllBox.checked;
    // è·å–åˆ°checkSingleBoxä¸‹çš„æ‰€æœ‰checkboxçš„çŠ¶æ€
    for (var i = 0; i < doms.checkSingleBox.length; i++) {
      //   console.log(doms.checkSingleBox[i].checked);
      // å®ƒä»¬çš„çŠ¶æ€è¦ä¸checkAllçš„çŠ¶æ€ä¿æŒä¸€è‡´
      doms.checkSingleBox[i].checked = checkAllStatus;
    }
    if (!checkAllStatus) {
      // å¦‚æœå…¨é€‰æ¡†çš„çŠ¶æ€ä¸º false çš„è¯
      curCheckedNumsInTBody = 0; // tbody é‡Œæ‰€æœ‰ checkbox é‡Œé€‰ä¸­çš„ä¸ªæ•°ä¸º 0
    } else {
      // å¦‚æœå…¨é€‰æ¡†çš„çŠ¶æ€ä¸º true çš„è¯
      curCheckedNumsInTBody = doms.tbody.children.length; // tbody é‡Œæ‰€æœ‰çš„ checkbox é‡Œé€‰ä¸­çš„ä¸ªæ•°å°±ä¸ tbody çš„é•¿åº¦ä¸€æ ·
    }
  }

  // 1-2. å‡½æ•°ï¼šç»Ÿè®¡tbodyå¤é€‰æ¡†çš„æŒ‰é’®é€‰ä¸­ä¸ªæ•°ï¼Œå¦‚æœtbodyé‡Œçš„é•¿åº¦ç›¸ç­‰ï¼Œé‚£å°±æ›´æ”¹å…¨é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€
  function changeTTitleCheckStatusAccordingTBody() {
    //   console.log(this);
    if (this.checked) {
      // å½“ç‚¹å‡»ä¹‹åï¼ŒçŠ¶æ€æ˜¯ true çš„è¯ï¼Œå°±æŠŠé€‰ä¸­çš„ä¸ªæ•°çš„ + 1
      curCheckedNumsInTBody++;
    } else {
      // å¦åˆ™ï¼ŒæŠŠé€‰ä¸­çš„ä¸ªæ•° - 1
      curCheckedNumsInTBody--;
    }

    console.log("å½“å‰é€‰ä¸­çš„ä¸ªæ•°ï¼š" + curCheckedNumsInTBody);

    // å¦‚æœtbody é‡Œé€‰ä¸­çš„ä¸ªæ•°ä¸ tbody é‡Œçš„é¡¹æ•°å…ˆç­‰ï¼Œé‚£å°±è®¾ç½®å…¨é€‰æ¡†çš„çŠ¶æ€ä¸º true
    if (curCheckedNumsInTBody === doms.checkSingleBox.length) {
      doms.checkAllBox.checked = true;
    } else {
      doms.checkAllBox.checked = false;
    }
  }

  // 2-1. æ ¹æ®æ‰€ç‚¹å‡»çš„é¡¹ï¼Œè¾“å‡ºå¯¹åº”çš„ä¸‹æ ‡ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œå¾…ä¼štbodyé‡Œçš„æ•°ç»„å¯ä»¥åªå–å¯¹åº”ä¸‹æ ‡çš„æ•°å€¼è¿›è¡Œæ¯”è¾ƒ
  function clickIndexInTTitle(e) {
    if (e.target.tagName === "INPUT") {
      return; // ç‚¹å‡»äº† input å…ƒç´ çš„è¯ï¼Œé‚£å°±è·³è¿‡
    }
    // æ‹¿åˆ°æ‰€ç‚¹å‡»é¡¹çš„ innerTextï¼Œæ‰¾åˆ°é‡Œé¢çš„æ–‡å­—æ˜¯å±äº ttNameä¸‹æ ‡çš„å“ªä¸€ä½
    // console.log(ttName.indexOf(e.target.innerText));
    var index = ttName.indexOf(e.target.innerText);
    if (index === -1) {
      return; // æ’é™¤æ‰ç‚¹å‡»äº† input å…ƒç´ çš„ th æ ‡ç­¾
    }
    // è·å–åˆ°å¯¹åº”éœ€è¦æ’åºçš„æ•°ç»„
    if (e.target.innerText === "ç¼–å·" || e.target.innerText === "å¹´é¾„") {
      console.log("ç‚¹å‡»äº†ç¼–å·æˆ–è€…å¹´é¾„");
      sortWithNums(index);
    }

    if (e.target.innerText === "å§“å" || e.target.innerText === "èŒä½") {
      console.log("ç‚¹å‡»äº†å§“åæˆ–è€…èŒä½");
      sortWithZH(index);
    }
  }

  // æ ¹æ®æ•°å­—æ’åº
  function sortWithNums(index) {
    // è·å– tbody ä¸­ æ¯é¡¹ çš„ index ä¸‹æ ‡çš„å…ƒç´ 
    var arr = Array.prototype.slice.call(doms.tbody.children);
    arr.sort(function (a, b) {
      return a.children[index].innerText - b.children[index].innerText;
    });
    for (var i = 0; i < arr.length; i++) {
      doms.tbody.appendChild(arr[i]);
    }
  }

  // æ ¹æ®ä¸­æ–‡æ’åº
  function sortWithZH(index) {
    // è·å– tbody ä¸­ æ¯é¡¹ çš„ index ä¸‹æ ‡çš„å…ƒç´ 
    var arr = Array.prototype.slice.call(doms.tbody.children);
    arr.sort(function (a, b) {
      return a.children[index].innerText.localeCompare(b.children[index].innerText, "zh");
    });
    for (var i = 0; i < arr.length; i++) {
      doms.tbody.appendChild(arr[i]);
    }
  }

  /**
   * ç›‘å¬ç»‘å®šäº‹ä»¶
   *  */
  doms.checkAllBox.addEventListener("click", contemTBodyAndTTitleCheckStatus);
  for (var i = 0; i < doms.checkSingleBox.length; i++) {
    //   console.log(doms.checkSingleBox[i]);
    doms.checkSingleBox[i].addEventListener("click", changeTTitleCheckStatusAccordingTBody);
  }
  // åˆ©ç”¨äº‹ä»¶å§”æ‰˜æœºåˆ¶ç›‘å¬ thead çš„ç‚¹å‡»äº‹ä»¶
  doms.thead.addEventListener("click", clickIndexInTTitle);
})();
```
