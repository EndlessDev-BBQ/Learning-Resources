# æ‰‹é£ç´æ•ˆæœ

## é¡µé¢ç»“æ„åˆ†æ

![é¡µé¢ç»“æ„åˆ†æ](https://img.hoocode.com/i/2024/11/21/ibqt8q.webp)

å®Œæ•´ä»£ç ï¼š

HTML

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ‰‹é£ç´æ•ˆæœ</title>
    <link rel="stylesheet" href="./index.css" />
  </head>
  <body>
    <ul class="menu-container">
      <li class="menu">
        <h2>èœå•1</h2>
        <ul class="submenu">
          <li>èœå•1</li>
          <li>èœå•2</li>
          <li>èœå•3</li>
          <li>èœå•4</li>
        </ul>
      </li>
      <li class="menu">
        <h2>èœå•2</h2>
        <ul class="submenu">
          <li>èœå•1</li>
          <li>èœå•2</li>
          <li>èœå•3</li>
          <li>èœå•4</li>
        </ul>
      </li>
      <li class="menu">
        <h2>èœå•3</h2>
        <ul class="submenu">
          <li>èœå•1</li>
          <li>èœå•2</li>
          <li>èœå•3</li>
          <li>èœå•4</li>
        </ul>
      </li>
      <li class="menu">
        <h2>èœå•4</h2>
        <ul class="submenu">
          <li>èœå•1</li>
          <li>èœå•2</li>
          <li>èœå•3</li>
          <li>èœå•4</li>
        </ul>
      </li>
    </ul>

    <script src="./animation.js"></script>
    <script src="./index.js"></script>
  </body>
</html>
```

CSS

```css
h2 {
  margin: 0;
  padding: 0;
  font-size: 100%;
  font-weight: normal;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.menu-container {
  width: 200px;
  margin: 0 auto;
  line-height: 30px;
}

.menu-container h2 {
  padding: 0 20px;
  cursor: pointer;
}

.submenu {
  padding: 0 30px;
  background: lightgoldenrodyellow;
  height: 0px;
  overflow: hidden;
}

.submenu li {
  height: 30px;
  line-height: 30px;
}

.menu {
  margin: 20px 0;
  background: lightcoral;
}
```

**å¦‚ä½•ç†è§£ `font-size: 100%` ?**
åœ¨CSSä¸­ï¼Œfont-size: 100%; è¡¨ç¤ºå°†å­—ä½“å¤§å°è®¾ç½®ä¸ºå½“å‰å…ƒç´ çš„ ç»§æ‰¿å€¼ çš„ 100%ã€‚è¿™æ„å‘³ç€å­—ä½“å¤§å°ä¼šåŸºäºçˆ¶å…ƒç´ çš„ font-size å±æ€§è®¡ç®—ã€‚

1. é»˜è®¤å­—ä½“å¤§å°ï¼š
åœ¨å¤§å¤šæ•°æµè§ˆå™¨ä¸­ï¼Œæ ¹å…ƒç´ ï¼ˆ<html>ï¼‰çš„é»˜è®¤å­—ä½“å¤§å°æ˜¯ 16pxï¼Œå³ font-size: 16pxã€‚
å¦‚æœæ²¡æœ‰å¯¹çˆ¶å…ƒç´ è®¾ç½®å…¶ä»–å­—ä½“å¤§å°ï¼Œ100% é€šå¸¸ç­‰åŒäº 16pxã€‚

2. ç»§æ‰¿æœºåˆ¶ï¼š
CSS çš„ font-size é»˜è®¤æ˜¯å¯ç»§æ‰¿çš„ï¼Œå­å…ƒç´ çš„å­—ä½“å¤§å°ä¼šæ ¹æ®çˆ¶å…ƒç´ è®¡ç®—ã€‚
ä½¿ç”¨ 100% ä¼šè®©å­å…ƒç´ çš„å­—ä½“å¤§å°ç­‰äºçˆ¶å…ƒç´ çš„å­—ä½“å¤§å°ã€‚


## å®ç°æ€è·¯åˆ†æ

> æ€è€ƒï¼š
> 1. åˆå§‹åŒ–ï¼šä¸€å¼€å§‹åšä»€ä¹ˆï¼Ÿ
> 2. äº¤äº’ï¼šè·Ÿç”¨æˆ·æœ‰ä»€ä¹ˆäº¤äº’ï¼Œäº¤äº’çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨è¿™ä¸ªæ•ˆæœä¸­ï¼Œä¸€å¼€å§‹æ²¡æœ‰ä»€ä¹ˆè¦åˆå§‹åŒ–çš„ï¼ˆæ–‡å­—æ»šåŠ¨çš„åˆå§‹åŒ–å°±æ˜¯æ–‡å­—ä¸€å¼€å§‹è¦æ»šèµ·æ¥ï¼Œè€Œè¿™é‡Œä¸€å¼€å§‹æ˜¯é™æ€çš„ï¼Œæ‰€ä»¥ä¸€å¼€å§‹å°±ä¸ç”¨åˆå§‹åŒ–ï¼‰ã€‚

### äº¤äº’ï¼šè·Ÿç”¨æˆ·æœ‰ä»€ä¹ˆäº¤äº’ï¼Œäº¤äº’çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ

**ä¸ºäº†é˜²æ­¢å…¨å±€æ±¡æŸ“ï¼Œæœ€å¥½åœ¨æœ€åçš„æ—¶å€™æŠŠä»£ç éƒ½æ”¾åœ¨ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°é‡Œã€‚ğŸ˜Š**

> æ€è·¯æ¨æ¼”ï¼š
> æœ€ç»ˆçš„æ•ˆæœæ˜¯ï¼šå½“ç”¨æˆ·ç‚¹å‡»ä»»ä½•ä¸€ä¸ªèœå•é¡¹æ—¶ï¼Œéƒ½èƒ½åšåˆ°æ˜¾ç¤ºå¯¹åº”èœå•é¡¹ä¸‹çš„å­èœå•é¡¹ã€‚å†ç‚¹å‡»ä¸€æ¬¡ï¼Œå°±èƒ½åšåˆ°å…³é—­å¯¹åº”èœå•é¡¹ä¸‹çš„å­èœå•é¡¹ã€‚
>
> 1. é‚£ä¹ˆå¦‚ä½•å®ç°â€œæ˜¾ç¤ºå­èœå•é¡¹â€çš„æ•ˆæœï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯é¦–å…ˆå°±è¦å…ˆè·å–åˆ°ï¼Œç”¨æˆ·ç‚¹å‡»çš„æ˜¯å“ªä¸€ä¸ªèœå•ï¼ŸçŸ¥é“äº†ç”¨æˆ·ç‚¹å‡»å“ªä¸ªèœå•åï¼Œæ˜¯ä¸æ˜¯è¦è·å–åˆ°å¯¹åº”çš„å­èœå•é¡¹ï¼Œæ–¹ä¾¿åé¢çš„æ§åˆ¶ï¼Ÿ
> å¦‚æœè®¤å¯è¿™ä¸ªæ€è·¯äº†ï¼Œé‚£ä¹ˆâ€œæ˜¾ç¤ºå­èœå•é¡¹â€åˆè¦æ€ä¹ˆæ¥æ§åˆ¶å‘¢ï¼Ÿç­”ï¼šé€šè¿‡ **è®¾ç½®å­èœå•é¡¹çš„é«˜åº¦** æ¥æ§åˆ¶ã€‚æ¯”å¦‚åœ¨å…³é—­çš„çŠ¶æ€ä¸‹ï¼Œå°±â€œä¸æ˜¾ç¤ºå­èœå•é¡¹â€ï¼Œä¹Ÿå°±æ˜¯è®¾ç½®å­èœå•é¡¹çš„é«˜åº¦ä¸º0ï¼Œæ§åˆ¶æº¢å‡ºçš„éƒ¨åˆ†éšè—ï¼›åœ¨æ‰“å¼€çš„çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬è¦è·å–åˆ°æ‰€ç‚¹å‡»çš„èœå•é¡¹ä¸‹æœ‰å¤šå°‘ä¸ªå­èœå•é¡¹ï¼Œç„¶åæ ¹æ®è¿™ä¸ªæ•°é‡æ¥åŠ¨æ€è®¡ç®—å‡ºæ•´ä¸ªå­èœå•é¡¹çš„é«˜åº¦ï¼Œæœ€åå†è®¾ç½®å­èœå•é¡¹çš„é«˜åº¦ä¸ºè¿™ä¸ªé«˜åº¦å³å¯ã€‚
> è¿™æ ·å°±å¯ä»¥å®ç°â€œæ˜¾ç¤ºå­èœå•é¡¹â€çš„åŠŸèƒ½äº†ã€‚
> 2. é‚£ä¹ˆâ€œå…³é—­å­èœå•é¡¹â€çš„æ•ˆæœåˆè¦æ€ä¹ˆå®ç°ï¼Ÿéå¸¸ç®€å•ï¼Œä¾æ—§æ˜¯ **è®¾ç½®å­èœå•é¡¹çš„é«˜åº¦** ï¼Œè®¾ç½®ä¸º 0 å°±â€œå…³é—­å­èœå•é¡¹â€äº†ã€‚
> 3. é‚£ä¹ˆâ€œåˆ‡æ¢æ˜¾ç¤ºå’Œå…³é—­å­èœå•é¡¹â€åˆè¦æ€ä¹ˆè®¾è®¡ï¼Ÿè¿™æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—æ€è€ƒé—®é¢˜ï¼(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§å¦‚æœè¦å®ç°è¿™ç§å¯ä»¥é€šè¿‡ç‚¹å‡»å°±èƒ½ **åˆ‡æ¢èœå•é¡¹çš„æ˜¾ç¤ºå…³é—­çŠ¶æ€** çš„è¯ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯è¦ç»™æ‰€ç‚¹å‡»çš„èœå•é¡¹ä¸‹çš„å­èœå•é¡¹è®¾ç½®ä¸€ä¸ªå½“å‰çŠ¶æ€ï¼Ÿæ¯”å¦‚è¯´æˆ‘ç‚¹å‡»äº† èœå•1 ï¼ˆé»˜è®¤å½“å‰çŠ¶æ€æ˜¯å…³é—­çŠ¶æ€ï¼‰ï¼Œé‚£ä¹ˆ èœå•1 çš„å­èœå•é¡¹çš„å½“å‰çŠ¶æ€å°±ä»å…³é—­çŠ¶æ€å˜æˆæ‰“å¼€çŠ¶æ€ï¼Œå†ç‚¹å‡»ä¸€æ¬¡ï¼Œæ˜¯ä¸æ˜¯å°±ä»æ‰“å¼€çŠ¶æ€å˜æˆå…³é—­çŠ¶æ€ï¼Ÿé‚£ä¹ˆåœ¨ä»£ç é‡Œé¢æˆ‘ä»¬æ€ä¹ˆå»å®ç°è¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ **è®¾ç½®è‡ªå®šä¹‰å±æ€§** å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚(â—'â—¡'â—)ğŸ‰
> 4. é‚£ä¹ˆæ¥ä¸‹æ¥å°±è¦å¼€å§‹è€ƒè™‘åŠ¨ç”»äº†ï¼Œè¿™ç§æ‰“å¼€æˆ–è€…å…³é—­åŠ¨ç”»è¦æ€ä¹ˆå¤„ç†ï¼Ÿ
> æˆ‘ä»¬å°±è¦çŸ¥é“ï¼Œ**åŠ¨ç”»çš„æœ¬è´¨ï¼šä»ä¸€ä¸ªå€¼ç»è¿‡ä¸€å®šçš„æ—¶é—´ï¼Œå˜åŠ¨åˆ°å¦ä¸€ä¸ªå€¼ã€‚** è¿™å’Œæˆ‘ä»¬ Day 1 åšçš„ æ–‡å­—æ»šåŠ¨æ•ˆæœ æ˜¯ä¸æ˜¯ä¸€ä¸ªé“ç†ï¼Ÿâœ” æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å¼€å§‹è€ƒè™‘ï¼Œå¦‚æœä»¥åè¦åšå¾ˆå¤šå¾ˆå¤šç±»ä¼¼çš„åŠ¨ç”»çš„è¯ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥åšæˆä¸€ä¸ªé€šç”¨çš„å‡½æ•°/å¯¹è±¡æ¥è¿›è¡Œå¤„ç†ï¼ŸğŸ’¡
>
> æœ‰äº†è¿™ä¹ˆå¤šæ€è·¯ï¼Œé‚£æˆ‘ä»¬è¦å…ˆä»å“ªé‡Œå¼€å§‹ç€æ‰‹å‘¢ï¼Ÿ
> ä¸ºäº†ä½¿ä»£ç çœ‹èµ·æ¥éå¸¸æœ‰é€»è¾‘æ¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠä¸»è¦çš„åŠŸèƒ½éƒ½åšå‡ºæ¥ï¼Œç„¶åè¦ç”¨çš„æ—¶å€™ç›´æ¥è°ƒç”¨å¯¹åº”çš„åŠŸèƒ½å®ç°æ•ˆæœå°±å¯ä»¥äº†ã€‚
> 1. æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æœ€å¼€å§‹ **å…ˆæŠŠåŠ¨ç”»çš„å°è£…å®ç°** ã€‚å‚è€ƒåŠ¨ç”»çš„æœ¬è´¨æ¥å®Œæˆã€‚ğŸ’ª
> 2. åŠ¨ç”»å®ç°åï¼Œæˆ‘ä»¬å¯ä»¥æ¥ç€å®ç° **æ˜¾ç¤ºå­èœå•é¡¹** å’Œ **å…³é—­å­èœå•é¡¹** ï¼Œåœ¨è¿™é‡Œå°±å¯ä»¥ç»“åˆä¸Šç¬¬ 1 æ­¥æ‰€å°è£…çš„åŠ¨ç”»æ•ˆæœæ¥å¢åŠ æ•ˆæœã€‚
> 3. è¿™3ä¸ªåŠŸèƒ½å®ç°åï¼Œæˆ‘ä»¬å¯ä»¥æ¥ç€å®ç° **åˆ‡æ¢æ˜¾ç¤ºå’Œå…³é—­å­èœå•é¡¹** ï¼Œè¿™é‡Œæ¶‰åŠåˆ°äº† **è®¾ç½®è‡ªå®šä¹‰å±æ€§** ï¼Œæ‰©å±•ä¸‹ ã€Šè‡ªå®šä¹‰å±æ€§éšç€äº‹ä»¶çš„å‘ç”Ÿåšå‡ºä¸åŒçš„æ”¹å˜ã€‹ çš„ä½¿ç”¨åœºæ™¯ã€‚
> 4. æœ€åå†æ ¹æ®æ‰€ç‚¹å‡»çš„èœå•é¡¹æ¥åˆ‡æ¢æ˜¾ç¤ºå’Œå…³é—­å­èœå•é¡¹å³å¯ã€‚
> 5. æ‰©å±•ï¼šä¸ºäº†å®ç°ç”¨æˆ·ç‚¹å‡»ç¬¬äºŒä¸ªèœå•é¡¹å°±å…³é—­å…¶ä»–å±•å¼€çš„å­èœå•é¡¹çš„æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ **å±æ€§é€‰æ‹©å™¨** çš„æ–¹å¼æ¥æ‰¾åˆ°å½“å‰çŠ¶æ€æ˜¯å±•å¼€çš„å­èœå•é¡¹ï¼Œç„¶åå°†å…¶å…³é—­å³å¯ã€‚

é…£ç•…æ·‹æ¼“ğŸ’¦ğŸ’¦ğŸ’¦ï¼Œä¹Ÿæ±—æµæµƒèƒŒäº†ï¼Œæ…¢æ…¢æ¥ï¼Œæœ‰æ€è·¯å°±å¥½ï¼Œæ¥ä¸‹æ¥å¼€å§‹å®ç°å•¦ï¼
    
#### 1ï¸âƒ£å°è£…åŠ¨ç”»

ğŸ¤”æ€è€ƒï¼š
```js
// æƒ³æœ‰è¿™ä¹ˆä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ä¼ å…¥ä»¥ä¸‹çš„å€¼ï¼Œç„¶åå®ƒæ ¹æ®è¦æ±‚å»ç›¸åº”åšåŠ¨ç”»
createAnimation({
    from: 0, // èµ·å§‹å€¼
    to: 30, // ç›®æ ‡å€¼
    totalMS: 500, // åŠ¨ç”»æŒç»­çš„æ€»æ—¶é—´
    duration: 10, // åŠ¨ç”»é—´éš”
    onmove: function(n) {
        // næ˜¯è¿™ä¸€æ¬¡å˜åŒ–çš„å€¼
    },
    onend: function(){
        // å˜åŒ–å®Œæˆåè¿è¡Œè¯¥å‡½æ•°
    }
});
```

**å®ç°å°è£…ï¼š**

animation.js

```js
// åŠ¨ç”»çš„å®ç°
function createAnimation(config) {
  // æ‹¿åˆ°ä¼ é€’è¿‡æ¥çš„å€¼
  var from = config.from; // èµ·å§‹å€¼
  var to = config.to; // ç›®æ ‡å€¼
  var totalMS = config.totalMS || 500; // åŠ¨ç”»æŒç»­çš„æ€»æ—¶é—´é»˜è®¤å€¼ä¸º500ms
  var duration = config.duration || 15; // åŠ¨ç”»çš„é—´éš”æ—¶é—´é»˜è®¤å€¼ä¸º15ms
  var frams = Math.floor(totalMS / duration); // è®¡ç®—å‡ºåŠ¨ç”»çš„å¸§æ•°
  var curFrams = 0; // å½“å‰æ‰§è¡Œåˆ°ç¬¬å‡ å¸§ â€”â€” å½“å‰çš„å¸§æ•°
  var step = (to - from) / frams; // è®¡ç®—å‡ºæ¯å¸§è¦æ”¹åŠ¨å¤šå°‘èµ·å§‹å€¼

  // å¼€å§‹åˆ¶ä½œåŠ¨ç”»
  var timerId = setInterval(function () {
    from += step; // æ¯ä¸€é—´éš”æ—¶é—´ï¼Œèµ·å§‹å€¼å¢åŠ  step çš„é‡
    curFrams++; // æ‰§è¡Œçš„å¸§æ•°åŠ ä¸€
    if (curFrams >= frams) {
      // å½“å‰çš„å¸§æ•°è¶…è¿‡äº†åŠ¨ç”»çš„å¸§æ•°ï¼Œåœæ­¢æ‰§è¡Œ
      from = to; // èµ·å§‹å€¼ åˆ°è¾¾äº† ç›®æ ‡å€¼
      clearInterval(timerId); // æ¸…é™¤è®¡æ—¶å™¨
      config.onmove && config.onmove(from); // æ‰§è¡Œéœ€è¦ä¿®æ”¹ä»€ä¹ˆå€¼çš„å‡½æ•°ï¼Œä»¥ä¾¿å¾—åˆ°ä»€ä¹ˆç±»å‹çš„åŠ¨ç”»
      config.onend && config.onend(); // æ‰§è¡Œå®Œæˆåçš„å‡½æ•°ã€‚å…ˆåˆ¤æ–­æ˜¯å¦æœ‰ä¼ è¿›æ¥ï¼Œæœ‰å†æ‰§è¡Œåé¢çš„å‡½æ•°
      return; // ç«‹åˆ» return ç»“æŸï¼Œä¸å†æ‰§è¡Œåé¢çš„ onmove
    }
    // æ‰§è¡Œéœ€è¦ä¿®æ”¹ä»€ä¹ˆå€¼çš„å‡½æ•°ï¼Œä»¥ä¾¿å¾—åˆ°ä»€ä¹ˆç±»å‹çš„åŠ¨ç”»
    config.onmove && config.onmove(from);
  }, duration);
}
```

**æµ‹è¯•å°è£…çš„åŠ¨ç”»æ•ˆæœ - å¤§ä¿ƒé”€ - 1ï¼š**

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOOCODEå•†åŸ 1024ç¨‹åºå‘˜èŠ‚ å¤§ä¿ƒé”€å•¦ï¼</title>
</head>
<body>
    <h2>HOOCODEå•†åŸ 1024ç¨‹åºå‘˜èŠ‚ å¤§ä¿ƒé”€ï¼ï¼ï¼$<span>500</span></h2>

    <script src="./animation.js"></script>
    <script>
        var span = document.querySelector('span');

        createAnimation({
            from: 500,
            to: 99,
            totalMS: 500,
            onmove: function(from){
                // æˆ‘è¦çš„åŠ¨ç”»ï¼šè®© 500->90 æ˜¯ä» 500-400-300-200-..99 è¿™æ ·å­å˜åŒ–ä¸‹æ¥
                span.innerText = from.toFixed(2); 
            },
            onend: function(){
                // åŠ¨ç”»æ‰§è¡Œç»“æŸæ—¶ï¼Œæˆ‘æƒ³è®© 99 å˜å¤§ï¼Œå˜çº¢
                span.style.color = "red";
                span.style.fontSize = 50 + 'px';
            }
        })
    </script>
</body>
</html> 
```

æ•ˆæœå±•ç¤ºï¼š

![æµ‹è¯•å°è£…çš„åŠ¨ç”»æ•ˆæœ-å¤§ä¿ƒé”€-1](https://img.hoocode.com/i/2024/11/21/p1zrhr.gif)

**æµ‹è¯•å°è£…çš„åŠ¨ç”»æ•ˆæœ - å®³ç¾çš„é•¿æ–¹å½¢ - 2ï¼š**

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®³ç¾çš„é•¿æ–¹å½¢</title>
    <style>
        .container {
            background: lightcoral;
            width: 100px;
            height: 500px;
        }
    </style>
</head>
<body>
    <div class="container"></div>

    <script src="./animation.js"></script>
    <script>
        var div = document.querySelector('.container');
        
        div.addEventListener('click', function(e){
            createAnimation({
                from: 500,
                to: 150,
                onmove: function(from) {
                    // æˆ‘è¦çš„åŠ¨ç”»ï¼šå½“ç”¨æˆ·ç‚¹å‡»è¿™ä¸ª div åï¼Œæˆ‘è¦è®©è¿™ä¸ª div çš„é«˜åº¦æ…¢æ…¢å‡åˆ° to çš„å€¼
                    div.style.height = from + 'px';
                },
                onend: function(){
                    // åŠ¨ç”»æ‰§è¡Œç»“æŸæ—¶ï¼Œæˆ‘æƒ³è®© div çš„èƒŒæ™¯é¢œè‰²å˜æˆå…¶ä»–é¢œè‰²
                    div.style.backgroundColor = "#008c8c";
                }
            });
        });
    </script>
</body>
</html>
```

æ•ˆæœå±•ç¤ºï¼š

![æµ‹è¯•å°è£…çš„åŠ¨ç”»æ•ˆæœ-å®³ç¾çš„é•¿æ–¹å½¢-2](https://img.hoocode.com/i/2024/11/21/p1zvyn.gif)
    

#### 2ï¸âƒ£å®ç° **æ˜¾ç¤ºå­èœå•é¡¹ & å…³é—­å­èœå•é¡¹** 

1. é¦–å…ˆæˆ‘ä»¬æ‹¿åˆ°é¡µé¢ä¸­è¢«ç‚¹å‡»çš„ èœå•é¡¹ å…ƒç´ 

```js
// è·å–ç‚¹å‡»é¡¹ï¼ˆåœ¨æµè§ˆå™¨çš„å…ƒç´ ä¸­å¯ä»¥æ‰¾åˆ°ç”¨æˆ·ç‚¹å‡»çš„æ˜¯å“ªä¸ªå…ƒç´ ï¼‰
var title = document.querySelectorAll('.menu h2');

// ç»™æ¯ä¸ªç‚¹å‡»é¡¹éƒ½æ³¨å†Œä¸Šç‚¹å‡»äº‹ä»¶
for (var i = 0; i < title.length; i ++ ) {
    title[i].addEventListener('click', function(){
        console.log("ç”¨æˆ·ç‚¹å‡»äº†æ­¤é¡¹ï¼Œæ­¤é¡¹æ˜¯ï¼š" + title[i].innerText); // è¿™é‡ŒæŠ¥é”™ï¼Œä¸ºä»€ä¹ˆï¼Ÿ[æ³¨]    
    });
}
```

![åœ¨å¾ªç¯å†…æ³¨å†Œäº‹ä»¶å‡½æ•°-é”™è¯¯æŠ¥å‘Š](https://img.hoocode.com/i/2024/11/21/pdgogb.webp)

æ— æ³•è¯»å– undefined ä¸‹çš„å±æ€§ innerTextã€‚ä¸ºä»€ä¹ˆè¿™é‡Œä¼šæŠ¥é”™ï¼Ÿåˆ†æå¼€å§‹(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»*)

`title[i].innerText` é‡Œçš„ title[i] æ˜¯ undefined ï¼Ÿé‚£æˆ‘ä»¬å°±æ¥æ‰“å° title è¿™ä¸ªæ•°ç»„ï¼Œçœ‹æ˜¯å¦çœŸçš„è·å–åˆ°äº†å¯¹åº”çš„ èœå•é¡¹ domå…ƒç´ ã€‚

```js
// è·å–ç‚¹å‡»é¡¹ï¼ˆåœ¨æµè§ˆå™¨çš„å…ƒç´ ä¸­å¯ä»¥æ‰¾åˆ°ç”¨æˆ·ç‚¹å‡»çš„æ˜¯å“ªä¸ªå…ƒç´ ï¼‰
var title = document.querySelectorAll('.menu h2');
console.log(title);
```

æ‰“å°ç»“æœï¼š

![æ’é”™æŠ¥å‘Š1](https://img.hoocode.com/i/2024/11/21/pgaazr.webp)

äº‹å®è¯æ˜ï¼Œè·å–åˆ°äº†ã€‚é‚£ä¸ºä»€ä¹ˆ title[i] æ˜¯ undefined å‘¢ï¼Ÿæ­¤æ—¶å›æƒ³èµ· **åœ¨å¾ªç¯ä¸­æ³¨å†Œäº‹ä»¶å‡½æ•°** é‡Œçš„ **é—­åŒ…** çŸ¥è¯†ã€‚æˆ‘ä»¬æŠŠ i æ‰“å°ä¸€ä¸‹ã€‚

```js
// ç»™æ¯ä¸ªç‚¹å‡»é¡¹éƒ½æ³¨å†Œä¸Šç‚¹å‡»äº‹ä»¶
for (var i = 0; i < title.length; i ++ ) {
    title[i].addEventListener('click', function(){
        console.log(i); // æ‰“å° i 
    });
}
```

![æ’é”™æŠ¥å‘Š2](https://img.hoocode.com/i/2024/11/21/pjg9q8.webp)

éƒ½æ˜¯ 4 ï¼ï¼ï¼åŸå› æ‰¾åˆ°äº†ï¼Œå°±æ˜¯é—­åŒ…å¯¼è‡´çš„ç»“æœã€‚

è§£é‡Šï¼šåœ¨å…ƒç´ è¢«ç‚¹å‡»ä¹‹å‰ï¼Œi å°±å·²ç»åˆ°è¾¾äº† 4 çš„å€¼ï¼Œæ‰€ä»¥å½“ç”¨æˆ·ç‚¹å‡» title[i] å…ƒç´ è¿‡åï¼Œè§¦å‘çš„ `title[i].innerText` é‡Œçš„ i å°±æ—©å·²æ˜¯ 4 äº†ï¼è€Œå‹æ ¹å°±æ²¡æœ‰ title[4] çš„å€¼ï¼Œæ‰€ä»¥æ˜¯ undefined ã€‚

è§£å†³æ–¹æ³•ï¼š1. å¯ä»¥æ”¾åœ¨ç«‹å³æ‰§è¡Œå‡½æ•°é‡Œï¼›2. å¯ä»¥æŠŠ var æ”¹æˆ letï¼›3. æ”¹æˆç”¨ this æŒ‡å‘ï¼Œå› ä¸ºåœ¨äº‹ä»¶å¤„ç†å‡½æ•°é‡Œï¼Œthisçš„æŒ‡å‘æ°¸è¿œéƒ½æ˜¯è°ƒç”¨è¿™ä¸ªå¤„ç†å‡½æ•°çš„é‚£ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œå°±æ˜¯ title[i]ï¼Œæ‰€ä»¥ä¸ä¼šè¢« i æ‰€å½±å“ã€‚

å…¶ä»–æ–¹æ³•å¾…è¡¥å……Â·Â·Â·

```js
// è·å–ç‚¹å‡»é¡¹ï¼ˆåœ¨æµè§ˆå™¨çš„å…ƒç´ ä¸­å¯ä»¥æ‰¾åˆ°ç”¨æˆ·ç‚¹å‡»çš„æ˜¯å“ªä¸ªå…ƒç´ ï¼‰
var title = document.querySelectorAll('.menu h2');

// ç»™æ¯ä¸ªç‚¹å‡»é¡¹éƒ½æ³¨å†Œä¸Šç‚¹å‡»äº‹ä»¶
for (var i = 0; i < title.length; i ++ ) {
    title[i].addEventListener('click', function(){
        console.log("ç”¨æˆ·ç‚¹å‡»äº†æ­¤é¡¹ï¼Œæ­¤é¡¹æ˜¯ï¼š" + this.innerText);   
    });
}
```

æ‰“å°ç»“æœï¼š

![æ’é”™æŠ¥å‘Š3](https://img.hoocode.com/i/2024/11/21/qprqjv.webp)

åˆ†æç»“æŸ(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»(ãƒ»âˆ€ãƒ»*)

2. æˆ‘ä»¬æ‹¿åˆ°è¢«ç‚¹å‡»çš„èœå•é¡¹å…ƒç´ åï¼Œè¦æ€ä¹ˆå®ç°æ˜¾ç¤ºå’Œå…³é—­å­èœå•é¡¹å‘¢ï¼Ÿç­”ï¼šé€šè¿‡è®¾ç½®å­èœå•é¡¹çš„heightæ¥æ§åˆ¶ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨ç¬¬ä¸€ä¸ªèœå•é¡¹æ¥åšæµ‹è¯•ã€‚

- å…ˆå®Œæˆ **æ˜¾ç¤ºå­èœå•é¡¹** çš„åŠŸèƒ½ï¼š

to è®¾ç½®å¤šå°‘ï¼Ÿé‚£å°±è¦çœ‹æ‰€ç‚¹å‡»çš„èœå•é¡¹åº•ä¸‹çš„å­èœå•é¡¹æœ‰å¤šå°‘ä¸ªäº†

```js
// test
var test = document.querySelector('.submenu');

// æ‰“å¼€å­èœå•é¡¹
function openMenu(subMenu) {
    var to = subMenu.children.length * itemHeight; // è®¡ç®—ç›®æ ‡å€¼ï¼šé«˜åº¦è¦å±•å¼€å¤šå°‘
    // è®¾ç½®åŠ¨ç”»
    createAnimation({
        from: 0, // æœ€å¼€å§‹æ˜¯ 0
        to: to,
        onmove: function(from) {
            // åŠ¨ç”»ï¼šè®¾ç½®å­èœå•é¡¹çš„é«˜åº¦çš„å˜åŒ–
            subMenu.style.height = from + 'px';
        },
        onend: function(){
        }
    });
}
```

æ•ˆæœï¼š

![openMenuå‡½æ•°çš„æ¼”ç¤ºæ•ˆæœ-1](https://img.hoocode.com/i/2024/11/21/r1ru3m.gif)

- å†å®Œæˆ **å…³é—­å­èœå•é¡¹** çš„åŠŸèƒ½ï¼š

from è®¾ç½®å¤šå°‘ï¼Ÿè¿˜æ˜¯è¦çœ‹æ‰€ç‚¹å‡»çš„èœå•é¡¹åº•ä¸‹çš„å­èœå•é¡¹æœ‰å¤šå°‘ä¸ªğŸ˜„

```js
// å…³é—­å­èœå•é¡¹
function closeMenu(subMenu) {
    var from = subMenu.children.length * itemHeight; // è·å¾—èµ·å§‹å€¼
    // è®¾ç½®åŠ¨ç”»
    createAnimation({
        from: from,
        to: 0, // ç›®æ ‡æ˜¯ 0
        onmove: function(from) {
            // åŠ¨ç”»ï¼šè®¾ç½®å­èœå•é¡¹çš„é«˜åº¦çš„å˜åŒ–
            subMenu.style.height = from + 'px';
        },
        onend: function(){
        }
    });
}
```

æ•ˆæœï¼š

![closeMenuå‡½æ•°çš„æ¼”ç¤ºæ•ˆæœ-2](https://img.hoocode.com/i/2024/11/21/r73phg.gif)

è¿™é‡Œåˆå‡ºç°ä¸€ä¸ªé—®é¢˜äº†ï¼Œæˆ‘åœ¨å±•å¼€çš„æ—¶å€™ä¸åœçš„è°ƒç”¨ openMenuï¼Œæˆ–è€…æ˜¯æˆ‘åœ¨å…³é—­çš„æ—¶å€™ä¸åœçš„è°ƒç”¨ closeMenuã€‚è¿™æ ·æ˜¯ä¸æ˜¯ä¼šå¯¼è‡´åˆ›å»ºäº†å¾ˆå¤šè®¡æ—¶å™¨ï¼Ÿé‚£ä¹ˆå¦‚ä½•æœ‰æ•ˆçš„é˜²æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿå‘¢ï¼Ÿæ¥ç€å¾€ä¸‹çœ‹~  **[æ ‡è®°ğŸ“Œ]**

#### 3ï¸âƒ£å®ç° **åˆ‡æ¢æ˜¾ç¤ºå’Œå…³é—­å­èœå•é¡¹**

1. è®¾ç½®è‡ªå®šä¹‰å±æ€§ status

æ ¹æ®æœ€å¼€å§‹çš„æ€è·¯ï¼Œæˆ‘ä»¬è¦è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„å±æ€§çŠ¶æ€æ¥çŸ¥é“æˆ‘æ‰€ç‚¹å‡»çš„èœå•é¡¹çš„å­èœå•é¡¹æ˜¯æ‰“å¼€è¿˜æ˜¯å…³é—­çš„ã€‚â€”â€” è¿™é‡Œæ¶‰åŠåˆ°äº† **è®¾ç½®è‡ªå®šä¹‰å±æ€§** çš„çŸ¥è¯†ã€‚

æ•…ï¼Œæˆ‘ä»¬è¦è‡ªå®šä¹‰ä¸€ä¸ª subMenu çš„ status çŠ¶æ€ï¼šé»˜è®¤æ˜¯å…³é—­çš„ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æŸä¸ªèœå•é¡¹çš„æ—¶å€™ï¼Œè®¾ç½®è¯¥ status ä¸ºæ‰“å¼€ï¼ˆopenedï¼‰ï¼Œå½“ç”¨æˆ·å†æ¬¡ç‚¹å‡»è¯¥èœå•é¡¹çš„æ—¶å€™ï¼Œè®¾ç½®è¯¥ status ä¸ºå…³é—­ï¼ˆclosedï¼‰ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªæ³¨æ„çš„ç‚¹ï¼Œå°±æ˜¯å½“æ­£åœ¨æ‰“å¼€æˆ–è€…æ­£åœ¨å…³é—­çš„æ—¶å€™ï¼ˆæ­£åœ¨æ’­æ”¾åŠ¨ç”»çš„æ—¶å€™ï¼‰ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯ä¹Ÿè¦ç»™ status è®¾ç½®å¯¹åº”çš„æ­£åœ¨æ‰“å¼€ï¼ˆplayingï¼‰çš„çŠ¶æ€ï¼Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆè€ƒè™‘ï¼Ÿ

ç¬¬ä¸€ç‚¹ï¼šå›ç­”ä¸Šé¢çš„é—®é¢˜ **[æ ‡è®°ğŸ“Œ]** ã€‚é˜²æ­¢åœ¨ **æ­£åœ¨æ‰“å¼€æˆ–è€…æ­£åœ¨å…³é—­** çš„æ—¶å€™ï¼Œç”¨æˆ·ä¸åœçš„è°ƒç”¨ openMenu æ‰€å¸¦æ¥çš„å¤šä¸ªè®¡æ—¶å™¨çš„åˆ›å»ºã€‚

ç¬¬äºŒç‚¹ï¼šå¯ä»¥æ›´åŠ æ¸…æ™°åœ°çŸ¥é“ç›®å‰è¿™ä¸ªå­èœå•é¡¹çš„çŠ¶æ€ã€‚å¢åŠ ä»£ç çš„å¯é˜…è¯»æ€§ã€‚

æ‰€ä»¥æˆ‘ä»¬è¦è®¾ç½®çš„ **status** æœ‰ **ä¸‰ç§æ¨¡å¼** ï¼š

1. æ‰“å¼€ï¼šopened
2. æ­£åœ¨æ‰“å¼€æˆ–è€…æ­£åœ¨å…³é—­ï¼šplaying
3. å…³é—­ï¼šclosed

ä¾æ—§æ˜¯ç”¨ test æ¥è¿›è¡Œæµ‹è¯•ï¼Œæ›´æ–°ä»£ç 

```js
// test
var test = document.querySelector('.submenu');

// æ‰“å¼€å­èœå•é¡¹
function openMenu(subMenu) {
    var to = subMenu.children.length * itemHeight; // è®¡ç®—ç›®æ ‡å€¼ï¼šé«˜åº¦è¦å±•å¼€å¤šå°‘
    
    // åˆ¤æ–­å½“å‰çŠ¶æ€æ˜¯å¦ä¸ºå…³é—­çŠ¶æ€æˆ–è€…ä¸€å¼€å§‹å°±æ²¡æœ‰å€¼ï¼Œæ˜¯çš„è¯å°±ç»§ç»­æ“ä½œï¼Œä¸æ˜¯çš„è¯ï¼ˆå¤„äºæ‰“å¼€çŠ¶æ€å’Œæ­£åœ¨æ’­æ”¾åŠ¨ç”»çš„çŠ¶æ€ï¼‰å°±ä¸åšä»»ä½•äº‹æƒ…
    var status = subMenu.getAttribute("status");
    if (status && status !== "closed") { // ä¸€å¼€å§‹å°±æœ‰å€¼ï¼Œå¹¶ä¸”å€¼ä¸æ˜¯å…³é—­çŠ¶æ€
        return; // ä¸åšä»»ä½•äº‹æƒ…
    }

    // status å¤„äºå…³é—­çŠ¶æ€ï¼Œå¯ä»¥å¼€å§‹æ‰“å¼€
    subMenu.setAttribute("status", "playing"); // æ­£åœ¨æ‰“å¼€ â€”â€” æ­£åœ¨æ’­æ”¾åŠ¨ç”»
    
    // è®¾ç½®åŠ¨ç”»
    createAnimation({
        from: 0, // æœ€å¼€å§‹æ˜¯ 0
        to: to,
        onmove: function(from) {
            // åŠ¨ç”»ï¼šè®¾ç½®å­èœå•é¡¹çš„é«˜åº¦çš„å˜åŒ–
            subMenu.style.height = from + 'px';
        },
        onend: function(){
            subMenu.setAttribute("status", "opened"); // åŠ¨ç”»åœæ­¢åï¼ŒçŠ¶æ€æ›´æ–°ä¸ºæ‰“å¼€
        }
    });
}

// å…³é—­å­èœå•é¡¹
function closeMenu(subMenu) {
    var from = subMenu.children.length * itemHeight; // è·å¾—èµ·å§‹å€¼
    
    // åˆ¤æ–­å½“å‰çŠ¶æ€æ˜¯å¦ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œæ˜¯çš„è¯å°±ç»§ç»­æ“ä½œï¼Œä¸æ˜¯çš„è¯ï¼ˆå¤„äºå…³é—­çŠ¶æ€å’Œæ­£åœ¨æ’­æ”¾åŠ¨ç”»çš„çŠ¶æ€ï¼‰å°±ä¸åšä»»ä½•äº‹æƒ…
    var status = subMenu.getAttribute("status");
    if (status !== "opened") { // ä¸æ˜¯æ‰“å¼€çŠ¶æ€ â€”â€” å¤„äºå…³é—­çŠ¶æ€å’Œæ­£åœ¨æ’­æ”¾åŠ¨ç”»çš„çŠ¶æ€
        return; // ä¸åšä»»ä½•äº‹æƒ…
    }

    // status å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œå¯ä»¥å¼€å§‹å…³é—­
    subMenu.setAttribute("status", "playing"); // æ­£åœ¨æ‰“å¼€ â€”â€” æ­£åœ¨æ’­æ”¾åŠ¨ç”»
    
    // è®¾ç½®åŠ¨ç”»
    createAnimation({
        from: from,
        to: 0, // ç›®æ ‡æ˜¯ 0
        onmove: function(from) {
            // åŠ¨ç”»ï¼šè®¾ç½®å­èœå•é¡¹çš„é«˜åº¦çš„å˜åŒ–
            subMenu.style.height = from + 'px';
        },
        onend: function(){
            subMenu.setAttribute("status", "closed"); // åŠ¨ç”»åœæ­¢åï¼ŒçŠ¶æ€æ›´æ–°ä¸ºå…³é—­
        }
    });
}
```

æ•ˆæœï¼š

![è®¾ç½®è‡ªå®šä¹‰å±æ€§statusåçš„æ¼”ç¤ºæ•ˆæœ](https://img.hoocode.com/i/2024/11/21/siloqx.gif)

2. å®ç°åªéœ€è¦è°ƒç”¨ä¸€ä¸ªåˆ‡æ¢å‡½æ•°å°±å¯ä»¥æ‰“å¼€å’Œå…³é—­å­èœå•é¡¹ï¼Œæ–¹ä¾¿åç»­è°ƒç”¨

å¯ä»¥åˆ©ç”¨ä¸€ä¸ª toggleMenu å‡½æ•°æ¥åˆ‡æ¢å­èœå•é¡¹çš„çŠ¶æ€

ä¾æ—§åˆ©ç”¨ test æ¥åšæµ‹è¯•

```js
// åˆ‡æ¢å­èœå•é¡¹
function toggleMenu(subMenu) {
    // è·å–å½“å‰å­èœå•é¡¹çš„çŠ¶æ€
    var status = subMenu.getAttribute("status");

    if (status === "opened") {
        // æ‰“å¼€çš„çŠ¶æ€
        closeMenu(subMenu); // å…³é—­
    }else if (status === "closed" || !status){
        // å…³é—­çŠ¶æ€ æˆ–è€… ä¸€å¼€å§‹å°±æ²¡æœ‰å€¼
        openMenu(subMenu); // æ‰“å¼€
    }

    // å‰©ä¸‹çš„å°±æ˜¯ æ­£åœ¨æ’­æ”¾åŠ¨ç”» çš„çŠ¶æ€äº†ï¼Œä¸åšä»»ä½•æ“ä½œ
}
```

æ•ˆæœï¼š

![toggleMenuçš„æ¼”ç¤ºæ•ˆæœ](https://img.hoocode.com/i/2024/11/21/sre4yx.gif)

#### 4ï¸âƒ£æœ€åå†æ ¹æ®æ‰€ç‚¹å‡»çš„èœå•é¡¹æ¥åˆ‡æ¢æ˜¾ç¤ºå’Œå…³é—­å­èœå•é¡¹å³å¯

åªè¦åœ¨æœ€å¼€å§‹æ³¨å†Œçš„ç‚¹å‡»äº‹ä»¶é‡Œï¼Œè°ƒç”¨ toggleMenu å‡½æ•°ï¼Œç„¶åä¼ å…¥æ‰€ç‚¹å‡»èœå•é¡¹çš„å­èœå•é¡¹å°±å¯ä»¥äº†ã€‚

```js
// è·å–ç‚¹å‡»é¡¹ï¼ˆåœ¨æµè§ˆå™¨çš„å…ƒç´ ä¸­å¯ä»¥æ‰¾åˆ°ç”¨æˆ·ç‚¹å‡»çš„æ˜¯å“ªä¸ªå…ƒç´ ï¼‰
var title = document.querySelectorAll('.menu h2');

var itemHeight = 30; // å­èœå•é¡¹ä¸­æ¯ä¸€é¡¹çš„é«˜åº¦

// ç»™æ¯ä¸ªç‚¹å‡»é¡¹éƒ½æ³¨å†Œä¸Šç‚¹å‡»äº‹ä»¶
for (var i = 0; i < title.length; i ++ ) {
    title[i].addEventListener('click', function(){
        // console.log("ç”¨æˆ·ç‚¹å‡»äº†æ­¤é¡¹ï¼Œæ­¤é¡¹æ˜¯ï¼š" + this.innerText);   
        var subMenu = this.nextElementSibling; // è·å–å½“å‰ç‚¹å‡»çš„ title å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ ï¼š.submenu
        // console.log(subMenu); // æµ‹è¯•
        toggleMenu(subMenu); // æ‰“å¼€ / å…³é—­å­èœå•é¡¹
    });
}
```

æ•ˆæœï¼š

![ç‚¹å‡»äº‹ä»¶ä¸­ç›´æ¥è°ƒç”¨toggleMenuçš„æ•ˆæœ](https://img.hoocode.com/i/2024/11/21/tu2kny.gif)

#### 5ï¸âƒ£å®ç°ç”¨æˆ·ç‚¹å‡»ç¬¬äºŒä¸ªèœå•é¡¹å°±å…³é—­å…¶ä»–å±•å¼€çš„å­èœå•é¡¹çš„æ•ˆæœ

é€»è¾‘ï¼šè·å–ä¸Šä¸€ä¸ªæ‰“å¼€ç€çš„å­èœå•é¡¹çš„ dom ï¼Œç„¶åå…³é—­å®ƒ ğŸ¤­

```js
// è·å–ç‚¹å‡»é¡¹ï¼ˆåœ¨æµè§ˆå™¨çš„å…ƒç´ ä¸­å¯ä»¥æ‰¾åˆ°ç”¨æˆ·ç‚¹å‡»çš„æ˜¯å“ªä¸ªå…ƒç´ ï¼‰
var title = document.querySelectorAll('.menu h2');

var itemHeight = 30; // å­èœå•é¡¹ä¸­æ¯ä¸€é¡¹çš„é«˜åº¦

// ç»™æ¯ä¸ªç‚¹å‡»é¡¹éƒ½æ³¨å†Œä¸Šç‚¹å‡»äº‹ä»¶
for (var i = 0; i < title.length; i ++ ) {
    title[i].addEventListener('click', function(){
        // console.log("ç”¨æˆ·ç‚¹å‡»äº†æ­¤é¡¹ï¼Œæ­¤é¡¹æ˜¯ï¼š" + this.innerText);   
        var subMenu = this.nextElementSibling; // è·å–å½“å‰ç‚¹å‡»çš„ title å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ ï¼š.submenu
        // console.log(subMenu); // æµ‹è¯•
        var lastOpenMenu = document.querySelector(".submenu[status=opened]"); // æ‰¾åˆ°ä¸Šä¸€ä¸ªæ‰“å¼€ç€çš„å…ƒç´ 
        // console.log(lastOpenMenu); // æµ‹è¯•
        if(lastOpenMenu){
            // å¦‚æœå­˜åœ¨ä¸Šä¸€ä¸ªæ‰“å¼€ç€çš„èœå•é¡¹
            closeMenu(lastOpenMenu); // å…³é—­å®ƒ
        }
        
        toggleMenu(subMenu); // æ‰“å¼€ / å…³é—­å­èœå•é¡¹
    });
}
```

æœ€ç»ˆæ•ˆæœï¼š

![æœ€ç»ˆæ•ˆæœ](https://img.hoocode.com/i/2024/11/21/tzjv90.gif)

æœ€ç»ˆ JS å®Œæ•´ä»£ç ï¼š

JavaScript

```js
/** æœ€åæ”¾åœ¨ä¸€ä¸ªæ‰§è¡Œå‡½æ•°é‡Œé¢ */
(function(){
    // è·å–ç‚¹å‡»é¡¹ï¼ˆåœ¨æµè§ˆå™¨çš„å…ƒç´ ä¸­å¯ä»¥æ‰¾åˆ°ç”¨æˆ·ç‚¹å‡»çš„æ˜¯å“ªä¸ªå…ƒç´ ï¼‰
    var title = document.querySelectorAll('.menu h2');

    var itemHeight = 30; // å­èœå•é¡¹ä¸­æ¯ä¸€é¡¹çš„é«˜åº¦

    var totalMS = 150; // è®¾ç½®åŠ¨ç”»çš„æ€»æŒç»­æ—¶é—´

    // ç»™æ¯ä¸ªç‚¹å‡»é¡¹éƒ½æ³¨å†Œä¸Šç‚¹å‡»äº‹ä»¶
    for (var i = 0; i < title.length; i ++ ) {
        title[i].addEventListener('click', function(){
            // console.log("ç”¨æˆ·ç‚¹å‡»äº†æ­¤é¡¹ï¼Œæ­¤é¡¹æ˜¯ï¼š" + this.innerText);   
            var subMenu = this.nextElementSibling; // è·å–å½“å‰ç‚¹å‡»çš„ title å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ ï¼š.submenu
            // console.log(subMenu); // æµ‹è¯•
            var lastOpenMenu = document.querySelector(".submenu[status=opened]"); // æ‰¾åˆ°ä¸Šä¸€ä¸ªæ‰“å¼€ç€çš„å…ƒç´ 
            // console.log(lastOpenMenu); // æµ‹è¯•
            if(lastOpenMenu){
                // å¦‚æœå­˜åœ¨ä¸Šä¸€ä¸ªæ‰“å¼€ç€çš„èœå•é¡¹
                closeMenu(lastOpenMenu); // å…³é—­å®ƒ
            }
            
            toggleMenu(subMenu); // æ‰“å¼€ / å…³é—­å­èœå•é¡¹
        });
    }

    // æ‰“å¼€å­èœå•é¡¹
    function openMenu(subMenu) {
        var to = subMenu.children.length * itemHeight; // è®¡ç®—ç›®æ ‡å€¼ï¼šé«˜åº¦è¦å±•å¼€å¤šå°‘
        
        // åˆ¤æ–­å½“å‰çŠ¶æ€æ˜¯å¦ä¸ºå…³é—­çŠ¶æ€æˆ–è€…ä¸€å¼€å§‹å°±æ²¡æœ‰å€¼ï¼Œæ˜¯çš„è¯å°±ç»§ç»­æ“ä½œï¼Œä¸æ˜¯çš„è¯ï¼ˆå¤„äºæ‰“å¼€çŠ¶æ€å’Œæ­£åœ¨æ’­æ”¾åŠ¨ç”»çš„çŠ¶æ€ï¼‰å°±ä¸åšä»»ä½•äº‹æƒ…
        var status = subMenu.getAttribute("status");
        if (status && status !== "closed") { // ä¸€å¼€å§‹å°±æœ‰å€¼ï¼Œå¹¶ä¸”å€¼ä¸æ˜¯å…³é—­çŠ¶æ€
            return; // ä¸åšä»»ä½•äº‹æƒ…
        }

        // status å¤„äºå…³é—­çŠ¶æ€ï¼Œå¯ä»¥å¼€å§‹æ‰“å¼€
        subMenu.setAttribute("status", "playing"); // æ­£åœ¨æ‰“å¼€ â€”â€” æ­£åœ¨æ’­æ”¾åŠ¨ç”»
        
        // è®¾ç½®åŠ¨ç”»
        createAnimation({
            from: 0, // æœ€å¼€å§‹æ˜¯ 0
            to: to,
            totalMS: totalMS,
            onmove: function(from) {
                // åŠ¨ç”»ï¼šè®¾ç½®å­èœå•é¡¹çš„é«˜åº¦çš„å˜åŒ–
                subMenu.style.height = from + 'px';
            },
            onend: function(){
                subMenu.setAttribute("status", "opened"); // åŠ¨ç”»åœæ­¢åï¼ŒçŠ¶æ€æ›´æ–°ä¸ºæ‰“å¼€
            }
        });
    }

    // å…³é—­å­èœå•é¡¹
    function closeMenu(subMenu) {
        var from = subMenu.children.length * itemHeight; // è·å¾—èµ·å§‹å€¼
        
        // åˆ¤æ–­å½“å‰çŠ¶æ€æ˜¯å¦ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œæ˜¯çš„è¯å°±ç»§ç»­æ“ä½œï¼Œä¸æ˜¯çš„è¯ï¼ˆå¤„äºå…³é—­çŠ¶æ€å’Œæ­£åœ¨æ’­æ”¾åŠ¨ç”»çš„çŠ¶æ€ï¼‰å°±ä¸åšä»»ä½•äº‹æƒ…
        var status = subMenu.getAttribute("status");
        if (status !== "opened") { // ä¸æ˜¯æ‰“å¼€çŠ¶æ€ â€”â€” å¤„äºå…³é—­çŠ¶æ€å’Œæ­£åœ¨æ’­æ”¾åŠ¨ç”»çš„çŠ¶æ€
            return; // ä¸åšä»»ä½•äº‹æƒ…
        }

        // status å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œå¯ä»¥å¼€å§‹å…³é—­
        subMenu.setAttribute("status", "playing"); // æ­£åœ¨æ‰“å¼€ â€”â€” æ­£åœ¨æ’­æ”¾åŠ¨ç”»
        
        // è®¾ç½®åŠ¨ç”»
        createAnimation({
            from: from,
            to: 0, // ç›®æ ‡æ˜¯ 0
            totalMS: totalMS,
            onmove: function(from) {
                // åŠ¨ç”»ï¼šè®¾ç½®å­èœå•é¡¹çš„é«˜åº¦çš„å˜åŒ–
                subMenu.style.height = from + 'px';
            },
            onend: function(){
                subMenu.setAttribute("status", "closed"); // åŠ¨ç”»åœæ­¢åï¼ŒçŠ¶æ€æ›´æ–°ä¸ºå…³é—­
            }
        });
    }

    // åˆ‡æ¢å­èœå•é¡¹
    function toggleMenu(subMenu) {
        // è·å–å½“å‰å­èœå•é¡¹çš„çŠ¶æ€
        var status = subMenu.getAttribute("status");

        if (status === "opened") {
            // æ‰“å¼€çš„çŠ¶æ€
            closeMenu(subMenu); // å…³é—­
        }else if (status === "closed" || !status){
            // å…³é—­çŠ¶æ€ æˆ–è€… ä¸€å¼€å§‹å°±æ²¡æœ‰å€¼
            openMenu(subMenu); // æ‰“å¼€
        }

        // å‰©ä¸‹çš„å°±æ˜¯ æ­£åœ¨æ’­æ”¾åŠ¨ç”» çš„çŠ¶æ€äº†ï¼Œä¸åšä»»ä½•æ“ä½œ
    }
})();
```

è‡³æ­¤ï¼Œæ‰‹é£ç´æ•ˆæœå°±å®Œç¾å®ç°å•¦ï¼Œè¿˜å­¦åˆ°äº†å¾ˆå¤šè€¶âœŒ
